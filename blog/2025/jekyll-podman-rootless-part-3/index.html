<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Running Jekyll in a Rootless Podman Container: Part 3 - Reproducible Development and Testing | Allehanda</title> <meta name="author" content="Carl Johan Rehn"> <meta name="description" content="The final part of our series on using Podman rootless containers with Jekyll. This post focuses on testing and running a reproducible server using `podman-compose`."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/allehanda/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/allehanda/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/allehanda/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/allehanda/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://carljohanrehn.github.io/allehanda/blog/2025/jekyll-podman-rootless-part-3/"> <link rel="stylesheet" href="/allehanda/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/allehanda/assets/js/theme.js?2ed62375d27d1acd85fb25a8d933282f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/allehanda/">Allehanda</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/allehanda/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/allehanda/blog/">blog</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Running Jekyll in a Rootless Podman Container: Part 3 - Reproducible Development and Testing</h1> <p class="post-meta"> January 20, 2025 </p> <p class="post-tags"> <a href="/allehanda/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/allehanda/blog/tag/containers"> <i class="fa-solid fa-hashtag fa-sm"></i> Containers</a>   <a href="/allehanda/blog/tag/development"> <i class="fa-solid fa-hashtag fa-sm"></i> Development</a>   <a href="/allehanda/blog/tag/jekyll"> <i class="fa-solid fa-hashtag fa-sm"></i> Jekyll</a>   <a href="/allehanda/blog/tag/podman"> <i class="fa-solid fa-hashtag fa-sm"></i> Podman</a>   <a href="/allehanda/blog/tag/rootless"> <i class="fa-solid fa-hashtag fa-sm"></i> Rootless</a>     ·   <a href="/allehanda/blog/category/fries-al-folio"> <i class="fa-solid fa-tag fa-sm"></i> fries-al-folio</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Welcome to the third and final part of our series on running Jekyll in a rootless Podman container! In this post, we’ll focus on creating a reproducible workflow for testing and development using <strong><code class="language-plaintext highlighter-rouge">podman-compose</code></strong>. This approach simplifies the process of managing containers and makes it easier to build, test, and debug your Jekyll projects.</p> <p>If you’re new to this series, be sure to catch up on <a href="https://carljohanrehn.github.io/allehanda/blog/2025/jekyll-podman-rootless-part-1/">Part 1</a> and <a href="https://carljohanrehn.github.io/allehanda/blog/2025/jekyll-podman-rootless-part-2/">Part 2</a>, where we covered the basics of rootless Podman environments and file ownership considerations. Let’s dive in!</p> <hr> <h2 id="why-use-podman-compose">Why Use <code class="language-plaintext highlighter-rouge">podman-compose</code>?</h2> <p>In previous posts, we manually used Podman commands to run and stop containers. While this works, managing containers through a <strong><code class="language-plaintext highlighter-rouge">podman-compose</code></strong> workflow offers several benefits:</p> <ul> <li> <strong>Reproducibility</strong>: Ensures the same environment every time you spin up your containers.</li> <li> <strong>Ease of Use</strong>: A single command can bring up or tear down the entire development environment.</li> <li> <strong>Scalability</strong>: Quickly add other services to your environment if needed.</li> </ul> <p>To show how this works, we’ll utilize the following <code class="language-plaintext highlighter-rouge">docker-compose</code>-compatible file: <strong><code class="language-plaintext highlighter-rouge">docker-compose-project-podman.yml</code></strong>.</p> <hr> <h2 id="understanding-the-compose-file">Understanding the Compose File</h2> <p>Here’s an example <code class="language-plaintext highlighter-rouge">docker-compose-project-podman.yml</code> used for our Jekyll container:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3"</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">jekyll</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">pypak-jekyll-srv</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">al-folio-website</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">bash -c "</span>
      <span class="s">rm -f Gemfile.lock</span>
      <span class="s">&amp;&amp; bundler exec jekyll serve --watch --port=8080 --host=0.0.0.0 --livereload --verbose --trace"</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">../../..:/home/app/project:Z</span>
      <span class="pi">-</span> <span class="s">.:/home/app/srv/jekyll:Z</span>
</code></pre></div></div> <h3 id="key-sections-of-the-compose-file">Key Sections of the Compose File:</h3> <ol> <li> <p><strong>Version</strong>:<br> The <code class="language-plaintext highlighter-rouge">version: "3"</code> line specifies the Docker Compose file format.</p> </li> <li> <p><strong>Services</strong>:<br> Defines our containerized tasks, which in this case is the <strong><code class="language-plaintext highlighter-rouge">jekyll</code></strong> service.</p> </li> <li> <p><strong>Image</strong>:<br> The image <strong><code class="language-plaintext highlighter-rouge">pypak-jekyll-srv</code></strong> contains our Jekyll runtime.</p> </li> <li> <strong>Command</strong>:<br> This shell command ensures a clean state (<code class="language-plaintext highlighter-rouge">rm -f Gemfile.lock</code>) and runs the Jekyll server with options like: <ul> <li> <code class="language-plaintext highlighter-rouge">--watch</code>: Watches for file changes.</li> <li> <code class="language-plaintext highlighter-rouge">--port=8080</code>: Exposes the server on port 8080.</li> <li> <code class="language-plaintext highlighter-rouge">--host=0.0.0.0</code>: Opens the server to all interfaces.</li> <li> <code class="language-plaintext highlighter-rouge">--livereload</code>: Enables automatic browser reloads for a better dev experience.</li> <li> <code class="language-plaintext highlighter-rouge">--verbose</code> and <code class="language-plaintext highlighter-rouge">--trace</code>: Helpful for debugging.</li> </ul> </li> <li> <p><strong>Ports</strong>:<br> Maps port <code class="language-plaintext highlighter-rouge">8080</code> inside the container to port <code class="language-plaintext highlighter-rouge">8080</code> on your local machine.</p> </li> <li> <strong>Volumes</strong>:<br> Mounts host directories into the container for easy file access: <ul> <li> <code class="language-plaintext highlighter-rouge">../../..:/home/app/project:Z</code>: Maps a higher-level directory to <code class="language-plaintext highlighter-rouge">/home/app/project</code> in the container.</li> <li> <code class="language-plaintext highlighter-rouge">.:/home/app/srv/jekyll:Z</code>: Maps the current directory to <code class="language-plaintext highlighter-rouge">/home/app/srv/jekyll</code>.</li> </ul> </li> </ol> <hr> <h2 id="running-jekyll-with-podman-compose">Running Jekyll with <code class="language-plaintext highlighter-rouge">podman-compose</code> </h2> <h3 id="step-1-start-the-service">Step 1: Start the Service</h3> <p>Use this command to spin up the Jekyll container:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>podman-compose <span class="nt">-f</span> docker-compose-project-podman.yml up
</code></pre></div></div> <p>Once the container is running, you can view your Jekyll website locally by navigating to:</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8080
</code></pre></div></div> <p>The Jekyll server is now live and automatically updates when changes are made to your files.</p> <h3 id="step-2-stopping-the-service">Step 2: Stopping the Service</h3> <p>To shut down the service cleanly, run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>podman-compose <span class="nt">-f</span> docker-compose-project-podman.yml down
</code></pre></div></div> <p>This command stops and removes the container.</p> <hr> <h2 id="debugging-and-testing">Debugging and Testing</h2> <p>While using <code class="language-plaintext highlighter-rouge">podman-compose</code> is convenient, you’ll occasionally need to debug or test configurations. Here are a few useful commands:</p> <h3 id="access-the-running-container">Access the Running Container</h3> <p>You can directly interact with the container by opening a shell session inside it:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>podman <span class="nb">exec</span> <span class="nt">-it</span> al-folio-website /bin/bash
</code></pre></div></div> <p>This provides a terminal inside the container, allowing you to inspect files or run Jekyll commands directly.</p> <h3 id="testing-the-container-manually">Testing the Container Manually</h3> <p>If you’d like to test the container in isolation, you can run a temporary instance with:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>podman container run <span class="nt">-it</span> <span class="nt">--rm</span> pypak-jekyll-srv /bin/bash
</code></pre></div></div> <p>This creates a disposable container, which is destroyed after you exit.</p> <h3 id="listing-active-containers">Listing Active Containers</h3> <p>Verify which containers are currently running with:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>podman ps
</code></pre></div></div> <h3 id="removing-stuck-containers">Removing Stuck Containers</h3> <p>If a container fails to stop properly, you can forcibly remove it using:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>podman container <span class="nb">rm </span>al-folio-website
</code></pre></div></div> <hr> <h2 id="recap">Recap</h2> <p>In this post, we discussed how to use <code class="language-plaintext highlighter-rouge">podman-compose</code> to manage and test your Jekyll development workflow. Here’s a quick summary of what we covered:</p> <ol> <li> <strong>Getting Started</strong>: We explored the benefits of <code class="language-plaintext highlighter-rouge">podman-compose</code> for reproducible environments.</li> <li> <strong>Compose File</strong>: Broke down the essential components of a <code class="language-plaintext highlighter-rouge">docker-compose</code>-compatible file for Jekyll.</li> <li> <strong>Running and Debugging</strong>: Showed how to start, stop, and debug your Jekyll container.</li> </ol> <p>By using <code class="language-plaintext highlighter-rouge">podman-compose</code>, you can simplify container management and ensure consistency across environments, making your workflow more efficient.</p> <hr> <h2 id="series-wrap-up">Series Wrap-Up</h2> <p>With this third installment, we’ve completed our series on running Jekyll in rootless Podman containers:</p> <ul> <li> <a href="https://carljohanrehn.github.io/allehanda/blog/2025/jekyll-podman-rootless-part-1/"><strong>Part 1</strong></a>: Setting up Podman and running rootless containers.</li> <li> <a href="https://carljohanrehn.github.io/allehanda/blog/2025/jekyll-podman-rootless-part-2/"><strong>Part 2</strong></a>: Managing file permissions and user mapping.</li> <li> <strong>Part 3</strong> (this post): Automating workflows with <code class="language-plaintext highlighter-rouge">podman-compose</code>.</li> </ul> <p>We hope this series inspires you to experiment with containerized workflows for your development projects. If you have questions or would like to share your own use case, feel free to leave a comment below.</p> <p>Happy coding, and good luck with your projects!</p> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Carl Johan Rehn. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/allehanda/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/allehanda/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/allehanda/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/allehanda/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/allehanda/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/allehanda/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>